- content_for :head do
  - if params[:action] == 'index' or params[:action] == 'newest'
    = auto_discovery_link_tag :rss, newest_topics_url(:format => 'rss')
  - if params[:action] == 'interesting'
    = auto_discovery_link_tag :rss, interesting_topics_url(:format => 'rss', :token => current_user.access_token)
  :javascript
    function show_loading_notice() {
      $('#loading-notice').show();
    }
    function hide_loading_notice() {
      $('#loading-notice').hide();
    }
    function prepare_ajax_link() {
      $('#tabs a, .tag a').live('ajax:before', function(event, xhr, settings) {
        show_loading_notice();
      });
      $('#tabs a, .tag a').live('ajax:success', function(event, data, status, xhr) {
        hide_loading_notice();
      });
    }
    prepare_ajax_link();

= render :partial => 'subheader', :locals => {:remote => true}

= render :partial => 'topics'

- content_for :sidebar do
  - if current_logined?
    .section
      .section-content
        = link_to t('.create_topic'), new_topic_url, :class => 'button'
  - if current_logined?
    = render :partial => 'topics/sidebar/favorite_tags'
    - if params[:action] == 'tagged'
      = render :partial => 'topics/sidebar/current_tag'
  = render :partial => 'topics/sidebar/recent_tags'
